{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Flex%20Velozz%20TI/Documents/GitHub/SLA-FUSION/components/charts-section.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { Card } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { X, Download, TrendingDown } from 'lucide-react'\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts'\r\n\r\ninterface ChartsSectionProps {\r\n  data: any[]\r\n  onClose: () => void\r\n}\r\n\r\nexport function ChartsSection({ data, onClose }: ChartsSectionProps) {\r\n  const sellerDelays = data.reduce((acc, row) => {\r\n    if (!acc[row.vendedor]) {\r\n      acc[row.vendedor] = { vendedor: row.vendedor, atrasos: 0, total: 0, totalDiasAtraso: 0 }\r\n    }\r\n    acc[row.vendedor].total++\r\n    if (row.status === 'Atrasado') {\r\n      acc[row.vendedor].atrasos++\r\n      acc[row.vendedor].totalDiasAtraso += row.dias\r\n    }\r\n    return acc\r\n  }, {} as Record<string, any>)\r\n\r\n  const chartData = Object.values(sellerDelays)\r\n    .map((seller: any) => ({\r\n      vendedor: seller.vendedor,\r\n      atrasos: seller.atrasos,\r\n      noPrazo: seller.total - seller.atrasos,\r\n      percentual: Math.round((seller.atrasos / seller.total) * 100),\r\n      mediaDias: seller.atrasos > 0 ? Math.round(seller.totalDiasAtraso / seller.atrasos) : 0\r\n    }))\r\n    .sort((a, b) => b.percentual - a.percentual)\r\n\r\n  const handleExport = (format: 'png' | 'pdf') => {\r\n    alert(`Exportando gráfico como ${format.toUpperCase()}...`)\r\n  }\r\n\r\n  return (\r\n    <section className=\"fixed inset-0 z-50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80 animate-in fade-in duration-300\">\r\n      <div className=\"container mx-auto px-4 py-8 h-full overflow-y-auto\">\r\n        <div className=\"max-w-6xl mx-auto\">\r\n          <div className=\"flex justify-between items-center mb-8\">\r\n            <div>\r\n              <h2 className=\"text-3xl font-bold mb-2 flex items-center gap-3\">\r\n                <TrendingDown className=\"w-8 h-8 text-destructive\" />\r\n                Análise de Atrasos\r\n              </h2>\r\n              <p className=\"text-muted-foreground\">\r\n                Ranking automático e percentual de vendedores com mais atrasos\r\n              </p>\r\n            </div>\r\n            <Button variant=\"ghost\" size=\"icon\" onClick={onClose} className=\"hover:bg-destructive/10\">\r\n              <X className=\"w-5 h-5\" />\r\n            </Button>\r\n          </div>\r\n\r\n          <div className=\"grid md:grid-cols-2 gap-6 mb-8\">\r\n            <Card className=\"p-6 shadow-lg\">\r\n              <h3 className=\"font-semibold mb-4 text-lg\">Atrasos por Vendedor</h3>\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <BarChart data={chartData}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" opacity={0.3} />\r\n                  <XAxis \r\n                    dataKey=\"vendedor\" \r\n                    className=\"text-xs\" \r\n                    angle={-45}\r\n                    textAnchor=\"end\"\r\n                    height={80}\r\n                  />\r\n                  <YAxis />\r\n                  <Tooltip \r\n                    contentStyle={{ \r\n                      backgroundColor: 'hsl(var(--background))',\r\n                      border: '1px solid hsl(var(--border))',\r\n                      borderRadius: '8px',\r\n                      boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)'\r\n                    }}\r\n                  />\r\n                  <Legend />\r\n                  <Bar dataKey=\"atrasos\" fill=\"#ef4444\" name=\"Atrasos\" radius={[4, 4, 0, 0]} />\r\n                  <Bar dataKey=\"noPrazo\" fill=\"#22c55e\" name=\"No Prazo\" radius={[4, 4, 0, 0]} />\r\n                </BarChart>\r\n              </ResponsiveContainer>\r\n            </Card>\r\n\r\n            <Card className=\"p-6 shadow-lg\">\r\n              <h3 className=\"font-semibold mb-4 text-lg\">Ranking - Vendedores com Mais Atrasos</h3>\r\n              <div className=\"space-y-4\">\r\n                {chartData.slice(0, 5).map((seller, index) => (\r\n                  <div key={seller.vendedor} className=\"space-y-2\">\r\n                    <div className=\"flex justify-between items-center\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold shadow-sm ${\r\n                          index === 0 ? 'bg-red-500 text-white' :\r\n                          index === 1 ? 'bg-orange-500 text-white' :\r\n                          index === 2 ? 'bg-amber-500 text-white' :\r\n                          'bg-muted text-muted-foreground'\r\n                        }`}>\r\n                          {index + 1}\r\n                        </div>\r\n                        <div>\r\n                          <span className=\"font-semibold\">{seller.vendedor}</span>\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            {seller.atrasos} atrasos de {seller.atrasos + seller.noPrazo} registros\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        <span className={`text-sm font-bold ${\r\n                          seller.percentual > 50 ? 'text-red-600 dark:text-red-400' : \r\n                          seller.percentual > 30 ? 'text-orange-600 dark:text-orange-400' :\r\n                          'text-amber-600 dark:text-amber-400'\r\n                        }`}>\r\n                          {seller.percentual}%\r\n                        </span>\r\n                        {seller.mediaDias > 0 && (\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            Média: {seller.mediaDias}d\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"h-2 bg-muted rounded-full overflow-hidden\">\r\n                      <div \r\n                        className={`h-full transition-all duration-500 ${\r\n                          seller.percentual > 50 ? 'bg-gradient-to-r from-red-500 to-red-600' :\r\n                          seller.percentual > 30 ? 'bg-gradient-to-r from-orange-500 to-orange-600' :\r\n                          'bg-gradient-to-r from-amber-500 to-amber-600'\r\n                        }`}\r\n                        style={{ width: `${seller.percentual}%` }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </Card>\r\n          </div>\r\n\r\n          <div className=\"flex justify-center gap-3\">\r\n            <Button variant=\"outline\" onClick={() => handleExport('png')} className=\"gap-2 hover:bg-primary hover:text-primary-foreground transition-colors\">\r\n              <Download className=\"w-4 h-4\" />\r\n              Exportar PNG\r\n            </Button>\r\n            <Button variant=\"outline\" onClick={() => handleExport('pdf')} className=\"gap-2 hover:bg-primary hover:text-primary-foreground transition-colors\">\r\n              <Download className=\"w-4 h-4\" />\r\n              Exportar PDF\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}